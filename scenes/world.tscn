[gd_scene load_steps=6 format=3 uid="uid://crkodg3xjvs8l"]

[ext_resource type="Script" uid="uid://k1ajtnyv5dli" path="res://scripts/scenes/World.gd" id="1_nnsk1"]
[ext_resource type="Texture2D" uid="uid://cvyyud1qogare" path="res://assets/sprites/mapateste.png" id="3_4wyf3"]
[ext_resource type="Script" uid="uid://btky2via55uh2" path="res://scripts/configs/EnemyConfig.gd" id="3_71j4m"]
[ext_resource type="Resource" uid="uid://ckqipbflu3x5r" path="res://enemies/Slime.tres" id="4_qfnet"]

[sub_resource type="GDScript" id="GDScript_k0juu"]
script/source = "extends Node2D

@export var enemyScene = load(\"res://scenes/entities/enemy.tscn\")
@export var configs: Array[EnemyConfig] = []
@export var spawnRadius: float = 200
@export var count: int = 3

func SpawnEnemiesAround(center: Vector2):
	for i in range(count):
		if configs.is_empty(): return

		var enemy = enemyScene.instantiate()

		var cfg: EnemyConfig = configs[randi() % configs.size()]

		add_child(enemy)
		enemy.setupFromConfig(cfg)

		var angle = randf() * TAU
		var offset = Vector2(cos(angle), sin(angle)) * spawnRadius
		enemy.global_position = center + offset

		add_child(enemy)
"

[node name="World" type="Node2D"]
script = ExtResource("1_nnsk1")
configs = Array[ExtResource("3_71j4m")]([ExtResource("4_qfnet")])

[node name="EnemySpawner" type="Node2D" parent="."]
script = SubResource("GDScript_k0juu")
configs = Array[ExtResource("3_71j4m")]([ExtResource("4_qfnet")])

[node name="Sprite2D" type="Sprite2D" parent="."]
position = Vector2(-547, -157)
scale = Vector2(5.02969, 2.9)
texture = ExtResource("3_4wyf3")
